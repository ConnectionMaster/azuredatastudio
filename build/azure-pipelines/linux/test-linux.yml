parameters:
  extensionsToUnitTest: []

steps:

#  - task: ArchiveFiles@2
#    inputs:
#      rootFolderOrFile: '~/.config/azuredatastudio/logs'
#      includeRootFolder: true
#      archiveType: 'tar'
#      archiveFile: '$(Build.ArtifactStagingDirectory)/logs.tar.gz'
#      replaceExistingArchive: true
#    displayName: Archive logs

#  - task: CopyFiles@2
#    displayName: 'Copy Logs to: $(Build.ArtifactStagingDirectory)/logs/linux'
#    inputs:
#      SourceFolder: '~/.config/azuredatastudio/logs'
#      TargetFolder: '$(Build.ArtifactStagingDirectory)/logs/linux'

  - script: |
      set -e
      mkdir -p $(Build.ArtifactStagingDirectory)/logs/linux-x64
      mkdir -p ~/.config/azuredatastudio/logs
      date >> ~/.config/azuredatastudio/logs/log.txt
      cd ~/.config/azuredatastudio/logs
      tar -czvf $(Build.ArtifactStagingDirectory)/logs/linux-x64/logs-linux-x64.tar.gz .
    displayName: Copy Logs

  - task: PublishPipelineArtifact@0
    inputs:
      artifactName: logs-linux-x64.tar.gz
      targetPath: $(Build.ArtifactStagingDirectory)/logs/linux-x64
    displayName: 'Publish Logs'
    continueOnError: true
